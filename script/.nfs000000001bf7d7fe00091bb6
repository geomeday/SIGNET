#!/bin/bash

ncis=3
r=0.5
nboots=100
nnodes=500
ncores=16
memory=64
walltime=4
ARGS=`getopt -a -o r: -l ncis:,maxcor:,nnodes:,memory:,walltime:,help -- "$@"`

function usage() {
	echo 'Usage:'
	echo '  network [OPTION VAL] ...'
	echo 'Description:'
	echo '  --ncis NCIS			maximum number of cis-eQTL for each gene'
	echo '  -r MAX_COR		maximum corr. coeff. b/w cis-eQTL of same gene'
	echo '  --nnodes N_NODE			'
echo '  --ncores N_CORES			'
	echo '  --memory MEMORY			'
	echo '  --walltime WALLTIME		'
	exit
}
[ $? -ne 0 ] && usage

eval set -- "${ARGS}"

while true
do
case "$1" in
	--ncis)
		ncis=$2
		shift
              ;;
	-r)
		r=$2
		shift;;
	--nnodes)
		nnodes=$2
		shift;;
	--ncores)
		ncores=$2
		shift;;
	--memory)
		memory=$2
		shift;;
	--walltime)
		walltime=$2
		shift;;
	-h|--help)
		usage
		exit
              ;;
      --)
              shift
              break
              ;;
      esac
shift
done 


cd ./network
./network.sh $ncis $r $nboots $nnode $ncores $memory $walltime 
